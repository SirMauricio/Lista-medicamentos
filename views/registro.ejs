<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <!-- Enlace al archivo CSS de Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Registro de medicamento</h1>
        <a href="/mostrarDatos" class="btn btn-primary mb-3">Mostrar Datos</a> <!-- Botón para redireccionar a mostrarDatos -->

        <form action="/validar" method="post" class="formulario"> <!-- Se usa el método POST para registrar los valores en la tabla listamedicina -->

            <!-- Método que manda a llamar la función buscar nombreMedicina de la tabla medicina -->
            <label for="nombre">Nombre del Medicamento:</label><br> 
            <select class="form-select" aria-label="Single select example" name="nombre" id="nombre">
                <% nombreMedicamento.forEach(nombre => { %>
                    <option value="<%= nombre %>"><%= nombre %></option>
                <% }); %>
            </select><br>

            <label for="dosis">Dosis a tomar:</label><br>
            <input type="number" name="dosis" id="dosis" class="form-control"><br>

            <label for="toma">Toma:</label><br>
            <input type="number" name="toma" id="toma" class="form-control"><br>

            <label for="fecha">Fecha preescrita:</label><br>
            <input type="date" name="fecha" id="fecha" class="form-control" pattern="\d{4}-\d{2}-\d{2}" required><br>

            <label for="hora">Seleeción de la toma:</label><br>
            <input type="time" name="hora" id="hora" class="form-control" readonly><br> <!-- Campo de hora como solo lectura -->

            <label for="comentarios">Comentarios adicionales :</label><br>
            <input type="text" name="comentarios" id="comentarios" class="form-control"><br>

            <input type="submit" value="Registrar" class="btn btn-primary">
        </form>
    </div>

    <!-- Script de Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script para obtener la hora actual -->
    <script>
        // Función para obtener la hora actual y establecerla en el campo de hora
        function setHoraActual() {
            let campoHora = document.getElementById('hora');
            let fecha = new Date();
            let hora = fecha.getHours().toString().padStart(2, '0');
            let minutos = fecha.getMinutes().toString().padStart(2, '0');
            let horaActual = `${hora}:${minutos}`;
            campoHora.value = horaActual;
        }

        // Llamar a la función al cargar la página para establecer la hora actual
        window.onload = function() {
            setHoraActual();
        };
    </script>
</body>
</html>
